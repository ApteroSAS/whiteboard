<!DOCTYPE html>
<html>
<head>
    <title>Whiteboard</title>
    <meta charset="utf-8" />
    <link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var urlParams = new URLSearchParams(window.location.search);
            var whiteboardId = urlParams.get('whiteboardid');
            var whiteboardImg = document.getElementById("whiteboardImg");

            function updateImageSrc() {
                var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
                var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                if (whiteboardId) {
                    whiteboardImg.src = "api/whiteboard.jpg?whiteboardid=" + whiteboardId + "&width=" + width + "&height=" + height;
                }
            }

            function debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            whiteboardImg.addEventListener('load', function() {
                whiteboardImg.style.display = "block";
            });

            window.addEventListener('resize', debounce(updateImageSrc, 500));

            updateImageSrc();
        });
    </script>
</head>

<body style="margin:0;">
<img id="whiteboardImg" style="width: 100%; height: 100%; display: none;" src="" alt="Whiteboard" />
</body>
</html>
